# –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è AI –ü—Ä–æ–º—Ç–æ–≤ Open WebUI

–≠—Ç–æ—Ç –¥–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ AI –ø—Ä–æ–º—Ç—ã, –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Open WebUI, —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è.

## –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–ü—Ä–æ–º—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö](#–ø—Ä–æ–º—Ç—ã-–¥–ª—è-–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏-–º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö)
   - [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —á–∞—Ç–∞](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤-—á–∞—Ç–∞)
   - [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-—Ç–µ–≥–æ–≤)
   - [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
   - [–ì–µ–Ω–µ—Ä–∞—Ü–∏—è follow-up –≤–æ–ø—Ä–æ—Å–æ–≤](#–≥–µ–Ω–µ—Ä–∞—Ü–∏—è-follow-up-–≤–æ–ø—Ä–æ—Å–æ–≤)
2. [–ü—Ä–æ–º—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏](#–ø—Ä–æ–º—Ç—ã-–¥–ª—è-–ø–æ–∏—Å–∫–∞-–∏-–ø–æ–ª—É—á–µ–Ω–∏—è-–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏)
3. [–ü—Ä–æ–º—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏](#–ø—Ä–æ–º—Ç—ã-–¥–ª—è-—Ä–∞–±–æ—Ç—ã-—Å-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏)
4. [–ü—Ä–æ–º—Ç—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π](#–ø—Ä–æ–º—Ç—ã-–¥–ª—è-–∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö-—Ñ—É–Ω–∫—Ü–∏–π)
5. [–ü—Ä–æ–º—Ç—ã –¥–ª—è RAG (Retrieval-Augmented Generation)](#–ø—Ä–æ–º—Ç—ã-–¥–ª—è-rag-retrieval-augmented-generation)
6. [–ü—Ä–æ–º—Ç—ã –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π](#–ø—Ä–æ–º—Ç—ã-–¥–ª—è-—Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö-–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π)

---

## –ü—Ä–æ–º—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ —á–∞—Ç–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1599-1621`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_TITLE_GENERATION_PROMPT_TEMPLATE`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∫–æ—Ä–æ—Ç–∫–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ (3-5 —Å–ª–æ–≤) —Å —ç–º–æ–¥–∑–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø–µ—Ä–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–≠—Ç–æ—Ç –ø—Ä–æ–º—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫—Ä–∞—Ç–∫–æ–≥–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ–≥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ —á–∞—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π –æ—Ç—Ä–∞–∂–∞–µ—Ç –æ—Å–Ω–æ–≤–Ω—É—é —Ç–µ–º—É –±–µ—Å–µ–¥—ã. –ü—Ä–æ–º—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞ —è–∑—ã–∫–µ –±–µ—Å–µ–¥—ã (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∞–Ω–≥–ª–∏–π—Å–∫–∏–π –¥–ª—è –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω—ã—Ö —á–∞—Ç–æ–≤). –û—Ç–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å—Ç—Ä–æ–≥–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 2 —Å–æ–æ–±—â–µ–Ω–∏—è: `{{MESSAGES:END:2}}`
- –¢—Ä–µ–±—É–µ—Ç —Å—Ç—Ä–æ–≥–∏–π JSON —Ñ–æ—Ä–º–∞—Ç –±–µ–∑ markdown
- –ó–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –Ω–∞ —è–∑—ã–∫–µ —á–∞—Ç–∞
- –í–∫–ª—é—á–∞–µ—Ç —ç–º–æ–¥–∑–∏ –¥–ª—è –≤–∏–∑—É–∞–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–µ–º—ã
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏ –Ω–∞–¥ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ—Å—Ç—å—é

```python
DEFAULT_TITLE_GENERATION_PROMPT_TEMPLATE = """### Task:
Generate a concise, 3-5 word title with an emoji summarizing the chat history.
### Guidelines:
- The title should clearly represent the main theme or subject of the conversation.
- Use emojis that enhance understanding of the topic, but avoid quotation marks or special formatting.
- Write the title in the chat's primary language; default to English if multilingual.
- Prioritize accuracy over excessive creativity; keep it clear and simple.
- Your entire response must consist solely of the JSON object, without any introductory or concluding text.
- The output must be a single, raw JSON object, without any markdown code fences or other encapsulating text.
- Ensure no conversational text, affirmations, or explanations precede or follow the raw JSON output, as this will cause direct parsing failure.
### Output:
JSON format: { "title": "your concise title here" }
### Examples:
- { "title": "üìâ Stock Market Trends" },
- { "title": "üç™ Perfect Chocolate Chip Recipe" },
- { "title": "Evolution of Music Streaming" },
- { "title": "Remote Work Productivity Tips" },
- { "title": "Artificial Intelligence in Healthcare" },
- { "title": "üéÆ Video Game Development Insights" }
### Chat History:
<chat_history>
{{MESSAGES:END:2}}
</chat_history>"""
```

---

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–≥–æ–≤

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1629-1645`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_TAGS_GENERATION_PROMPT_TEMPLATE`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∏—Ä—É–µ—Ç —á–∞—Ç, –ø—Ä–∏—Å–≤–∞–∏–≤–∞—è 1-3 —à–∏—Ä–æ–∫–∏—Ö —Ç–µ–≥–∞ –∏ 1-3 —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏—Ö –ø–æ–¥—Ç–µ–º—ã.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü—Ä–æ–º—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Ç–µ–≥–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏–∏. –ù–∞—á–∏–Ω–∞–µ—Ç —Å –≤—ã—Å–æ–∫–æ—É—Ä–æ–≤–Ω–µ–≤—ã—Ö –¥–æ–º–µ–Ω–æ–≤ (–Ω–∞—É–∫–∞, —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏, —Ñ–∏–ª–æ—Å–æ—Ñ–∏—è –∏ —Ç.–¥.), –∑–∞—Ç–µ–º –¥–æ–±–∞–≤–ª—è–µ—Ç –±–æ–ª–µ–µ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Ç–µ–º—ã. –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö —á–∞—Ç–æ–≤ (–º–µ–Ω–µ–µ 3 —Å–æ–æ–±—â–µ–Ω–∏–π) –∏–ª–∏ —Å–ª–∏—à–∫–æ–º —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö –±–µ—Å–µ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–æ–ª—å–∫–æ —Ç–µ–≥ ["General"].

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —Å–æ–æ–±—â–µ–Ω–∏–π: `{{MESSAGES:END:6}}`
- –ù–∞—á–∏–Ω–∞–µ—Ç —Å —à–∏—Ä–æ–∫–∏—Ö –¥–æ–º–µ–Ω–æ–≤ (Science, Technology, Philosophy, Arts, Politics, Business, Health, Sports, Entertainment, Education)
- –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö/—Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã—Ö —á–∞—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ["General"]
- –í—ã–≤–æ–¥–∏—Ç JSON –º–∞—Å—Å–∏–≤ —Ç–µ–≥–æ–≤
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç–∏ –Ω–∞–¥ —Å–ø–µ—Ü–∏—Ñ–∏—á–Ω–æ—Å—Ç—å—é

```python
DEFAULT_TAGS_GENERATION_PROMPT_TEMPLATE = """### Task:
Generate 1-3 broad tags categorizing the main themes of the chat history, along with 1-3 more specific subtopic tags.

### Guidelines:
- Start with high-level domains (e.g. Science, Technology, Philosophy, Arts, Politics, Business, Health, Sports, Entertainment, Education)
- Consider including relevant subfields/subdomains if they are strongly represented throughout the conversation
- If content is too short (less than 3 messages) or too diverse, use only ["General"]
- Use the chat's primary language; default to English if multilingual
- Prioritize accuracy over specificity

### Output:
JSON format: { "tags": ["tag1", "tag2", "tag3"] }

### Chat History:
<chat_history>
{{MESSAGES:END:6}}
</chat_history>"""
```

---

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1653-1671`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_IMAGE_PROMPT_GENERATION_PROMPT_TEMPLATE`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –¥–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é AI –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–≤ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —á–∞—Ç–∞.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–≠—Ç–æ—Ç –ø—Ä–æ–º—Ç —Å–æ–∑–¥–∞–µ—Ç –ø–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –∞–Ω–∞–ª–∏–∑–∏—Ä—É—è –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 6 —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞. –ü—Ä–æ–º—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ç–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª—å –±—ã—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ–π, –≤–∫–ª—é—á–∞—è –¥–µ—Ç–∞–ª–∏ –æ —Ü–≤–µ—Ç–∞—Ö, —Ñ–æ—Ä–º–∞—Ö –∏ –≤–∞–∂–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö. –û–ø–∏—Å–∞–Ω–∏–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–Ω—è—Ç–Ω—ã–º —á–µ–ª–æ–≤–µ–∫—É, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –≤–∏–¥–∏—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —Å–æ–æ–±—â–µ–Ω–∏—è: `{{MESSAGES:END:6}}`
- –§–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –Ω–∞–∏–±–æ–ª–µ–µ –≤–∞–∂–Ω—ã—Ö –∞—Å–ø–µ–∫—Ç–∞—Ö
- –ò–∑–±–µ–≥–∞–µ—Ç –ø—Ä–µ–¥–ø–æ–ª–æ–∂–µ–Ω–∏–π –∏ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —è–∑—ã–∫ —á–∞—Ç–∞
- –î–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π —Ñ–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ –≥–ª–∞–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞—Ö

```python
DEFAULT_IMAGE_PROMPT_GENERATION_PROMPT_TEMPLATE = """### Task:
Generate a detailed prompt for am image generation task based on the given language and context. Describe the image as if you were explaining it to someone who cannot see it. Include relevant details, colors, shapes, and any other important elements.

### Guidelines:
- Be descriptive and detailed, focusing on the most important aspects of the image.
- Avoid making assumptions or adding information not present in the image.
- Use the chat's primary language; default to English if multilingual.
- If the image is too complex, focus on the most prominent elements.

### Output:
Strictly return in JSON format:
{
    "prompt": "Your detailed description here."
}

### Chat History:
<chat_history>
{{MESSAGES:END:6}}
</chat_history>"""
```

---

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è follow-up –≤–æ–ø—Ä–æ—Å–æ–≤

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1680-1694`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_FOLLOW_UP_GENERATION_PROMPT_TEMPLATE`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ü—Ä–µ–¥–ª–∞–≥–∞–µ—Ç 3-5 —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ø–æ—Å–ª–µ–¥—É—é—â–∏—Ö –≤–æ–ø—Ä–æ—Å–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∑–∞–¥–∞—Ç—å –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è –±–µ—Å–µ–¥—ã.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü—Ä–æ–º—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–≥ –±—ã –∑–∞–¥–∞—Ç—å –¥–∞–ª–µ–µ. –í–æ–ø—Ä–æ—Å—ã —Ñ–æ—Ä–º—É–ª–∏—Ä—É—é—Ç—Å—è –æ—Ç –ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –æ–±—Ä–∞—â–µ–Ω–Ω—ã–µ –∫ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—É. –û–Ω–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫—Ä–∞—Ç–∫–∏–º–∏, –ø–æ–Ω—è—Ç–Ω—ã–º–∏ –∏ –Ω–∞–ø—Ä—è–º—É—é —Å–≤—è–∑–∞–Ω—ã —Å –æ–±—Å—É–∂–¥–∞–µ–º–æ–π —Ç–µ–º–æ–π.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —Å–æ–æ–±—â–µ–Ω–∏–π: `{{MESSAGES:END:6}}`
- –í–æ–ø—Ä–æ—Å—ã –æ—Ç –ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–Ω–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞)
- –ù–µ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç —É–∂–µ –æ–±—Å—É–∂–¥–µ–Ω–Ω–æ–µ
- –î–ª—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –±–µ—Å–µ–¥ –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –±–æ–ª–µ–µ –æ–±—â–∏–µ, –Ω–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã
- –í—ã–≤–æ–¥–∏—Ç JSON –º–∞—Å—Å–∏–≤ –∏–∑ 3-5 –≤–æ–ø—Ä–æ—Å–æ–≤
- –¢–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã, –∏–º–µ—é—â–∏–µ —Å–º—ã—Å–ª –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ

```python
DEFAULT_FOLLOW_UP_GENERATION_PROMPT_TEMPLATE = """### Task:
Suggest 3-5 relevant follow-up questions or prompts that the user might naturally ask next in this conversation as a **user**, based on the chat history, to help continue or deepen the discussion.
### Guidelines:
- Write all follow-up questions from the user's point of view, directed to the assistant.
- Make questions concise, clear, and directly related to the discussed topic(s).
- Only suggest follow-ups that make sense given the chat content and do not repeat what was already covered.
- If the conversation is very short or not specific, suggest more general (but relevant) follow-ups the user might ask.
- Use the conversation's primary language; default to English if multilingual.
- Response must be a JSON array of strings, no extra text or formatting.
### Output:
JSON format: { "follow_ups": ["Question 1?", "Question 2?", "Question 3?"] }
### Chat History:
<chat_history>
{{MESSAGES:END:6}}
</chat_history>"""
```

---

## –ü—Ä–æ–º—Ç—ã –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1734-1756`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_QUERY_GENERATION_PROMPT_TEMPLATE`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 1-3 —à–∏—Ä–æ–∫–∏—Ö –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã—Ö –ø–æ–∏—Å–∫–æ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–∞ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ –∏–ª–∏ –±–∞–∑—ã –∑–Ω–∞–Ω–∏–π.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–≠—Ç–æ—Ç –ø—Ä–æ–º—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —Å–æ–æ–±—â–µ–Ω–∏–π —á–∞—Ç–∞ –∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç, –Ω—É–∂–Ω–∞ –ª–∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –æ—Ç–¥–∞–µ—Ç—Å—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤, –µ—Å–ª–∏ –µ—Å—Ç—å —Ö–æ—Ç—å –º–∞–ª–µ–π—à–∞—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç—å. –ü—Ä–æ–º—Ç —Å—Ç—Ä–µ–º–∏—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø–æ–ª–Ω—É—é, –∞–∫—Ç—É–∞–ª—å–Ω—É—é –∏ —Ü–µ–Ω–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –∞–±—Å–æ–ª—é—Ç–Ω–æ —Ç–æ—á–Ω–æ –∏–∑–≤–µ—Å—Ç–Ω–æ, —á—Ç–æ –ø–æ–∏—Å–∫ –Ω–µ –Ω—É–∂–µ–Ω.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —Å–æ–æ–±—â–µ–Ω–∏–π: `{{MESSAGES:END:6}}`
- –î–æ—Å—Ç—É–ø–Ω–∞ —Ç–µ–∫—É—â–∞—è –¥–∞—Ç–∞: `{{CURRENT_DATE}}`
- –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –ø—Ä–∏ –ª—é–±–æ–π –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ—Å—Ç–∏
- –¢–æ–ª—å–∫–æ JSON –æ—Ç–≤–µ—Ç, –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- –ö–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É–Ω–∏–∫–∞–ª—å–Ω—ã–º, –∫—Ä–∞—Ç–∫–∏–º –∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–º
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ 100% —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏, —á—Ç–æ –ø–æ–∏—Å–∫ –Ω–µ –Ω—É–∂–µ–Ω
- –§–æ–∫—É—Å–∏—Ä—É–µ—Ç—Å—è –Ω–∞ —à–∏—Ä–æ–∫–∏—Ö –∑–∞–ø—Ä–æ—Å–∞—Ö –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –æ—Ö–≤–∞—Ç–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

```python
DEFAULT_QUERY_GENERATION_PROMPT_TEMPLATE = """### Task:
Analyze the chat history to determine the necessity of generating search queries, in the given language. By default, **prioritize generating 1-3 broad and relevant search queries** unless it is absolutely certain that no additional information is required. The aim is to retrieve comprehensive, updated, and valuable information even with minimal uncertainty. If no search is unequivocally needed, return an empty list.

### Guidelines:
- Respond **EXCLUSIVELY** with a JSON object. Any form of extra commentary, explanation, or additional text is strictly prohibited.
- When generating search queries, respond in the format: { "queries": ["query1", "query2"] }, ensuring each query is distinct, concise, and relevant to the topic.
- If and only if it is entirely certain that no useful results can be retrieved by a search, return: { "queries": [] }.
- Err on the side of suggesting search queries if there is **any chance** they might provide useful or updated information.
- Be concise and focused on composing high-quality search queries, avoiding unnecessary elaboration, commentary, or assumptions.
- Today's date is: {{CURRENT_DATE}}.
- Always prioritize providing actionable and broad queries that maximize informational coverage.

### Output:
Strictly return in JSON format:
{
  "queries": ["query1", "query2"]
}

### Chat History:
<chat_history>
{{MESSAGES:END:6}}
</chat_history>
"""
```

---

## –ü—Ä–æ–º—Ç—ã –¥–ª—è –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1777-1817`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_AUTOCOMPLETE_GENERATION_PROMPT_TEMPLATE`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–ø–æ–ª–Ω—è–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (–æ–±—â–µ–µ –∏–ª–∏ –ø–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å).

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–≠—Ç–æ—Ç –ø—Ä–æ–º—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è, –∫–æ—Ç–æ—Ä–∞—è –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω—ã–º –æ–±—Ä–∞–∑–æ–º. –ü—Ä–æ–º—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö 6 —Å–æ–æ–±—â–µ–Ω–∏–π, —Ç–∏–ø –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è (General –∏–ª–∏ Search Query) –∏ —Ç–µ–∫—Å—Ç, –∫–æ—Ç–æ—Ä—ã–π –Ω—É–∂–Ω–æ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å. –í–∞–∂–Ω–æ, —á—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ç–µ–∫—Å—Ç –Ω–∞–ø—Ä—è–º—É—é, –Ω–µ –ø–æ–≤—Ç–æ—Ä—è—è –∏ –Ω–µ –ø–µ—Ä–µ—Ñ—Ä–∞–∑–∏—Ä—É—è –∏—Å—Ö–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Å–ª–µ–¥–Ω–∏–µ 6 —Å–æ–æ–±—â–µ–Ω–∏–π: `{{MESSAGES:END:6}}`
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–∏–ø –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è: `{{TYPE}}` (General –∏–ª–∏ Search Query)
- –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ç–µ–∫—Å—Ç –¥–ª—è –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏—è: `{{PROMPT}}`
- –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ç–µ–∫—Å—Ç –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ, –±–µ–∑ –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è
- –î–ª—è –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã—Ö —Å–ª—É—á–∞–µ–≤ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç—É—é —Å—Ç—Ä–æ–∫—É
- –ò–∑–±–µ–≥–∞–µ—Ç –∏–∑–ª–∏—à–Ω–∏—Ö –æ–±—ä—è—Å–Ω–µ–Ω–∏–π –∏ –Ω–µ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∏–¥–µ–π
- –í—ã–≤–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ JSON: `{ "text": "<–ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ>" }`

```python
DEFAULT_AUTOCOMPLETE_GENERATION_PROMPT_TEMPLATE = """### Task:
You are an autocompletion system. Continue the text in `<text>` based on the **completion type** in `<type>` and the given language.

### **Instructions**:
1. Analyze `<text>` for context and meaning.
2. Use `<type>` to guide your output:
   - **General**: Provide a natural, concise continuation.
   - **Search Query**: Complete as if generating a realistic search query.
3. Start as if you are directly continuing `<text>`. Do **not** repeat, paraphrase, or respond as a model. Simply complete the text.
4. Ensure the continuation:
   - Flows naturally from `<text>`.
   - Avoids repetition, overexplaining, or unrelated ideas.
5. If unsure, return: `{ "text": "" }`.

### **Output Rules**:
- Respond only in JSON format: `{ "text": "<your_completion>" }`.

### **Examples**:
#### Example 1:
Input:
<type>General</type>
<text>The sun was setting over the horizon, painting the sky</text>
Output:
{ "text": "with vibrant shades of orange and pink." }

#### Example 2:
Input:
<type>Search Query</type>
<text>Top-rated restaurants in</text>
Output:
{ "text": "New York City for Italian cuisine." }

---
### Context:
<chat_history>
{{MESSAGES:END:6}}
</chat_history>
<type>{{TYPE}}</type>
<text>{{PROMPT}}</text>
#### Output:
"""
```

---

## –ü—Ä–æ–º—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏

### –í—ã–∑–æ–≤ —Ñ—É–Ω–∫—Ü–∏–π –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1826-1847`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_TOOLS_FUNCTION_CALLING_PROMPT_TEMPLATE`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –í—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã/—Ñ—É–Ω–∫—Ü–∏–∏ –∏–∑ –¥–æ—Å—Ç—É–ø–Ω–æ–≥–æ —Å–ø–∏—Å–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–≠—Ç–æ—Ç –ø—Ä–æ–º—Ç –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –≤—ã–±–∏—Ä–∞–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –∏–∑ —Å–ø–∏—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö. –ü—Ä–æ–º—Ç –ø–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é `{{TOOLS}}` –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç JSON —Å –º–∞—Å—Å–∏–≤–æ–º –≤—ã–∑–æ–≤–æ–≤ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤, –≤–∫–ª—é—á–∞—è –∏—Ö –∏–º–µ–Ω–∞ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã. –ï—Å–ª–∏ –Ω–∏ –æ–¥–∏–Ω –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤: `{{TOOLS}}`
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ç–æ–ª—å–∫–æ JSON –æ–±—ä–µ–∫—Ç –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞
- –î–ª—è –∫–∞–∂–¥–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —É–∫–∞–∑—ã–≤–∞–µ—Ç –∏–º—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
- –ï—Å–ª–∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –Ω–µ –Ω—É–∂–Ω—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
- –ú–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ
- –§–æ—Ä–º–∞—Ç: `{ "tool_calls": [{"name": "...", "parameters": {...}}] }`

```python
DEFAULT_TOOLS_FUNCTION_CALLING_PROMPT_TEMPLATE = """Available Tools: {{TOOLS}}

Your task is to choose and return the correct tool(s) from the list of available tools based on the query. Follow these guidelines:

- Return only the JSON object, without any additional text or explanation.

- If no tools match the query, return an empty array:
   {
     "tool_calls": []
   }

- If one or more tools match the query, construct a JSON response containing a "tool_calls" array with objects that include:
   - "name": The tool's name.
   - "parameters": A dictionary of required parameters and their corresponding values.

The format for the JSON response is strictly:
{
  "tool_calls": [
    {"name": "toolName1", "parameters": {"key1": "value1"}},
    {"name": "toolName2", "parameters": {"key2": "value2"}}
  ]
}"""
```

---

### Code Interpreter (Python –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1979-1993`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_CODE_INTERPRETER_PROMPT`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –°–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º—Ç –¥–ª—è Code Interpreter - –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ Python –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞, –∫–æ—Ç–æ—Ä—ã–π –≤—ã–ø–æ–ª–Ω—è–µ—Ç –∫–æ–¥ –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–≠—Ç–æ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è AI –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ Python –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ç–æ—Ä–∞. –ü—Ä–æ–º—Ç –æ–±—ä—è—Å–Ω—è–µ—Ç, –∫–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å XML —Ç–µ–≥–∏ `<code_interpreter>` –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è Python –∫–æ–¥–∞, –∫–∞–∫–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–æ—Å—Ç—É–ø–Ω—ã, –∫–∞–∫ –≤—ã–≤–æ–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏—Ö. –ö–æ–¥ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±—ã—Å—Ç—Ä–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –ø–æ–∑–≤–æ–ª—è—è –ø—Ä–æ–≤–æ–¥–∏—Ç—å –≤—ã—á–∏—Å–ª–µ–Ω–∏—è, –∞–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é –∏ –º–Ω–æ–≥–æ–µ –¥—Ä—É–≥–æ–µ.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç XML —Ç–µ–≥–∏: `<code_interpreter type="code" lang="python"></code_interpreter>`
- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –î–æ—Å—Ç—É–ø–µ–Ω —à–∏—Ä–æ–∫–∏–π –Ω–∞–±–æ—Ä Python –±–∏–±–ª–∏–æ—Ç–µ–∫
- –í–ê–ñ–ù–û: –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å markdown —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (```) –≤–Ω—É—Ç—Ä–∏ —Ç–µ–≥–æ–≤
- –í—Å–µ–≥–¥–∞ –≤—ã–≤–æ–¥–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —á–µ—Ä–µ–∑ print
- –ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∞–Ω–∞–ª–∏–∑ –∏ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—é
- –ü—Ä–∏ –Ω–µ—è—Å–Ω—ã—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö - —É—Ç–æ—á–Ω—è—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä—è—Ç—å
- –û—Ç–æ–±—Ä–∞–∂–∞—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã/–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –æ—Ç–≤–µ—Ç–µ
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç API –≤—ã–∑–æ–≤—ã, —Ä–∞–±–æ—Ç—É —Å –¥–∞–Ω–Ω—ã–º–∏, –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é

```python
DEFAULT_CODE_INTERPRETER_PROMPT = """
#### Tools Available

1. **Code Interpreter**: `<code_interpreter type="code" lang="python"></code_interpreter>`
   - You have access to a Python shell that runs directly in the user's browser, enabling fast execution of code for analysis, calculations, or problem-solving.  Use it in this response.
   - The Python code you write can incorporate a wide array of libraries, handle data manipulation or visualization, perform API calls for web-related tasks, or tackle virtually any computational challenge. Use this flexibility to **think outside the box, craft elegant solutions, and harness Python's full potential**.
   - To use it, **you must enclose your code within `<code_interpreter type="code" lang="python">` XML tags** and stop right away. If you don't, the code won't execute.
   - When writing code in the code_interpreter XML tag, Do NOT use the triple backticks code block for markdown formatting, example: ```py # python code ``` will cause an error because it is markdown formatting, it is not python code.
   - When coding, **always aim to print meaningful outputs** (e.g., results, tables, summaries, or visuals) to better interpret and verify the findings. Avoid relying on implicit outputs; prioritize explicit and clear print statements so the results are effectively communicated to the user.
   - After obtaining the printed output, **always provide a concise analysis, interpretation, or next steps to help the user understand the findings or refine the outcome further.**
   - If the results are unclear, unexpected, or require validation, refine the code and execute it again as needed. Always aim to deliver meaningful insights from the results, iterating if necessary.
   - **If a link to an image, audio, or any file is provided in markdown format in the output, ALWAYS regurgitate word for word, explicitly display it as part of the response to ensure the user can access it easily, do NOT change the link.**
   - All responses should be communicated in the chat's primary language, ensuring seamless understanding. If the chat is multilingual, default to English for clarity.

Ensure that the tools are effectively utilized to achieve the highest-quality analysis for the user."""
```

---

## –ü—Ä–æ–º—Ç—ã –¥–ª—è RAG (Retrieval-Augmented Generation)

### RAG - –û—Ç–≤–µ—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:2676-2704`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_RAG_TEMPLATE`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/–±–∞–∑—ã –∑–Ω–∞–Ω–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∏–Ω–ª–∞–π–Ω-—Ü–∏—Ç–∞—Ç.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π –ø—Ä–æ–º—Ç –¥–ª—è RAG (Retrieval-Augmented Generation) —Å–∏—Å—Ç–µ–º—ã. –ü—Ä–æ–º—Ç –∏–Ω—Å—Ç—Ä—É–∫—Ç–∏—Ä—É–µ—Ç –º–æ–¥–µ–ª—å –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∑–∞–ø—Ä–æ—Å—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∏—Å–ø–æ–ª—å–∑—É—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤, –∏ –≤–∫–ª—é—á–∞—Ç—å –∏–Ω–ª–∞–π–Ω-—Ü–∏—Ç–∞—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ [id] —Ç–æ–ª—å–∫–æ –∫–æ–≥–¥–∞ –∏—Å—Ç–æ—á–Ω–∏–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç –∞—Ç—Ä–∏–±—É—Ç id. –ü—Ä–æ–º—Ç —Ç–∞–∫–∂–µ —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª—É—á–∞–µ—Ç –∫–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤: `{{CONTEXT}}`
- –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `{{QUERY}}`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–ª–∞–π–Ω-—Ü–∏—Ç–∞—Ç—ã [id] —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≤ `<source id="...">` –µ—Å—Ç—å –∞—Ç—Ä–∏–±—É—Ç id
- –û—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ —è–∑—ã–∫–µ –∑–∞–ø—Ä–æ—Å–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ß–µ—Ç–∫–æ —É–∫–∞–∑—ã–≤–∞–µ—Ç, –µ—Å–ª–∏ –Ω–µ –∑–Ω–∞–µ—Ç –æ—Ç–≤–µ—Ç–∞
- –ï—Å–ª–∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–µ—Ç –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ, –Ω–æ –º–æ–¥–µ–ª—å –∑–Ω–∞–µ—Ç –æ—Ç–≤–µ—Ç - –æ–±—ä—è—Å–Ω—è–µ—Ç —ç—Ç–æ –∏ –æ—Ç–≤–µ—á–∞–µ—Ç
- –ï—Å–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç –Ω–µ—á–∏—Ç–∞–µ–º—ã–π - –∏–Ω—Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç XML —Ç–µ–≥–∏ –≤ –æ—Ç–≤–µ—Ç–µ
- –¶–∏—Ç–∞—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∫—Ä–∞—Ç–∫–∏–º–∏ –∏ –Ω–∞–ø—Ä—è–º—É—é —Å–≤—è–∑–∞–Ω—ã —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π

```python
DEFAULT_RAG_TEMPLATE = """### Task:
Respond to the user query using the provided context, incorporating inline citations in the format [id] **only when the <source> tag includes an explicit id attribute** (e.g., <source id="1">).

### Guidelines:
- If you don't know the answer, clearly state that.
- If uncertain, ask the user for clarification.
- Respond in the same language as the user's query.
- If the context is unreadable or of poor quality, inform the user and provide the best possible answer.
- If the answer isn't present in the context but you possess the knowledge, explain this to the user and provide the answer using your own understanding.
- **Only include inline citations using [id] (e.g., [1], [2]) when the <source> tag includes an id attribute.**
- Do not cite if the <source> tag does not contain an id attribute.
- Do not use XML tags in your response.
- Ensure citations are concise and directly related to the information provided.

### Example of Citation:
If the user asks about a specific topic and the information is found in a source with a provided id attribute, the response should include the citation like in the following example:
* "According to the study, the proposed method increases efficiency by 20% [1]."

### Output:
Provide a clear and direct response to the user's query, including inline citations in the format [id] only when the <source> tag with id attribute is present in the context.

<context>
{{CONTEXT}}
</context>

<user_query>
{{QUERY}}
</user_query>
"""
```

---

## –ü—Ä–æ–º—Ç—ã –¥–ª—è —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã—Ö –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —ç–º–æ–¥–∑–∏ –ø–æ —ç–º–æ—Ü–∏—è–º

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1850-1852`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_EMOJI_GENERATION_PROMPT_TEMPLATE`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –ø–æ–¥—Ö–æ–¥—è—â–µ–µ —ç–º–æ–¥–∑–∏, –æ—Ç—Ä–∞–∂–∞—é—â–µ–µ —ç–º–æ—Ü–∏—é/–≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ –≥–æ–≤–æ—Ä—è—â–µ–≥–æ.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü—Ä–æ—Å—Ç–æ–π –ø—Ä–æ–º—Ç –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≥–æ–≤–æ—Ä—è—â–µ–≥–æ –∏ –≤—ã–±–æ—Ä–∞ –ø–æ–¥—Ö–æ–¥—è—â–µ–≥–æ —ç–º–æ–¥–∑–∏. –ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç —ç–º–æ–¥–∑–∏, –æ—Ç—Ä–∞–∂–∞—é—â–µ–µ –≤–µ—Ä–æ—è—Ç–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ (—Ä–∞–¥–æ—Å—Ç—å, –≥—Ä—É—Å—Ç—å, –∑–ª–æ—Å—Ç—å, —É–¥–∏–≤–ª–µ–Ω–∏–µ –∏ —Ç.–¥.).

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª—É—á–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ: `{{prompt}}`
- –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∏—Ä—É–µ—Ç —ç–º–æ—Ü–∏–∏ –∏–∑ —Ç–µ–∫—Å—Ç–∞
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–µ —ç–º–æ–¥–∑–∏ (üòä, üò¢, üò°, üò±, –∏ –¥—Ä.)
- –û—Ç—Ä–∞–∂–∞–µ—Ç –≤—ã—Ä–∞–∂–µ–Ω–∏–µ –ª–∏—Ü–∞ –≥–æ–≤–æ—Ä—è—â–µ–≥–æ

```python
DEFAULT_EMOJI_GENERATION_PROMPT_TEMPLATE = """Your task is to reflect the speaker's likely facial expression through a fitting emoji. Interpret emotions from the message and reflect their facial expression using fitting, diverse emojis (e.g., üòä, üò¢, üò°, üò±).

Message: ```{{prompt}}```"""
```

---

### MOA - Mixture of Agents (–°–∏–Ω—Ç–µ–∑ –æ—Ç–≤–µ—Ç–æ–≤)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1854-1858`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_MOA_GENERATION_PROMPT_TEMPLATE`
**–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è:** –°–∏–Ω—Ç–µ–∑–∏—Ä—É–µ—Ç –µ–¥–∏–Ω—ã–π –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç –∏–∑ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –æ—Ç–≤–µ—Ç–æ–≤ —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π.

**–û–ø–∏—Å–∞–Ω–∏–µ:**
–ü—Ä–æ–º—Ç –¥–ª—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏ Mixture of Agents (MOA), –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç—ã –æ—Ç –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –≤ –æ–¥–∏–Ω –≤—ã—Å–æ–∫–æ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç. –ü—Ä–æ–º—Ç –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –ø–æ–ª—É—á–µ–Ω–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã, —Ä–∞—Å–ø–æ–∑–Ω–∞–µ—Ç –ø—Ä–µ–¥–≤–∑—è—Ç–æ—Å—Ç—å –∏–ª–∏ –æ—à–∏–±–∫–∏, –∏ —Å–æ–∑–¥–∞–µ—Ç —Ç–æ—á–Ω—ã–π, –≤—Å–µ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–π –∏ —Ö–æ—Ä–æ—à–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –æ—Ç–≤–µ—Ç.

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü–æ–ª—É—á–∞–µ—Ç –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: `{{prompt}}`
- –ü–æ–ª—É—á–∞–µ—Ç –æ—Ç–≤–µ—Ç—ã –æ—Ç —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π: `{{responses}}`
- –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –ø—Ä–µ–¥–≤–∑—è—Ç–æ—Å—Ç–∏/–æ—à–∏–±–æ–∫
- –ù–µ –ø—Ä–æ—Å—Ç–æ –∫–æ–ø–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç—ã, –∞ —Å–æ–∑–¥–∞–µ—Ç —É–ª—É—á—à–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
- –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å, –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç—å –∏ —Å–≤—è–∑–Ω–æ—Å—Ç—å
- –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—ã—Å–æ—á–∞–π—à–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º –∫–∞—á–µ—Å—Ç–≤–∞

```python
DEFAULT_MOA_GENERATION_PROMPT_TEMPLATE = """You have been provided with a set of responses from various models to the latest user query: "{{prompt}}"

Your task is to synthesize these responses into a single, high-quality response. It is crucial to critically evaluate the information provided in these responses, recognizing that some of it may be biased or incorrect. Your response should not simply replicate the given answers but should offer a refined, accurate, and comprehensive reply to the instruction. Ensure your response is well-structured, coherent, and adheres to the highest standards of accuracy and reliability.

Responses from models: {{responses}}"""
```

---

## –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–º—Ç–æ–≤

–í—Å–µ –ø—Ä–æ–º—Ç—ã –≤ Open WebUI –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞–º–µ–Ω—è—é—Ç—Å—è —Ä–µ–∞–ª—å–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏. –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ñ–∞–π–ª–µ `/backend/open_webui/utils/task.py`.

### –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ (–¥–∞—Ç–∞ –∏ –≤—Ä–µ–º—è)

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/utils/task.py:35-111`

- `{{CURRENT_DATE}}` - –¢–µ–∫—É—â–∞—è –¥–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ YYYY-MM-DD
- `{{CURRENT_TIME}}` - –¢–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ HH:MM:SS AM/PM
- `{{CURRENT_DATETIME}}` - –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –≤–º–µ—Å—Ç–µ
- `{{CURRENT_WEEKDAY}}` - –ù–∞–∑–≤–∞–Ω–∏–µ –¥–Ω—è –Ω–µ–¥–µ–ª–∏

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/utils/task.py:35-111`

- `{{USER_NAME}}` - –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `{{USER_BIO}}` - –ë–∏–æ–≥—Ä–∞—Ñ–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `{{USER_GENDER}}` - –ü–æ–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `{{USER_BIRTH_DATE}}` - –î–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è
- `{{USER_AGE}}` - –í–æ–∑—Ä–∞—Å—Ç (–≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏–∑ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è)
- `{{USER_LOCATION}}` - –ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏–π

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/utils/task.py:144-183`

- `{{MESSAGES}}` - –í—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
- `{{MESSAGES:START:N}}` - –ü–µ—Ä–≤—ã–µ N —Å–æ–æ–±—â–µ–Ω–∏–π
- `{{MESSAGES:END:N}}` - –ü–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π (–Ω–∞–∏–±–æ–ª–µ–µ —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- `{{MESSAGES:MIDDLETRUNCATE:N}}` - –£—Ä–µ–∑–∞–Ω–∏–µ —Å–µ—Ä–µ–¥–∏–Ω—ã –¥–æ N —Å–æ–æ–±—â–µ–Ω–∏–π

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–æ–º—Ç–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/utils/task.py:114-141`

- `{{prompt}}` - –ü–æ–ª–Ω—ã–π —Ç–µ–∫—Å—Ç –ø—Ä–æ–º—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `{{prompt:start:N}}` - –ü–µ—Ä–≤—ã–µ N —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–æ–º—Ç–∞
- `{{prompt:end:N}}` - –ü–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–∏–º–≤–æ–ª–æ–≤ –ø—Ä–æ–º—Ç–∞
- `{{prompt:middletruncate:N}}` - –£—Ä–µ–∑–∞–Ω–∏–µ —Å–µ—Ä–µ–¥–∏–Ω—ã –¥–æ N —Å–∏–º–≤–æ–ª–æ–≤

### –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø—Ä–æ–º—Ç–æ–≤

**RAG –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (`/backend/open_webui/utils/task.py:189-226`):
- `{{CONTEXT}}` - –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏–∑ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤/–±–∞–∑—ã –∑–Ω–∞–Ω–∏–π
- `{{QUERY}}` - –ü–æ–∏—Å–∫–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–ê–≤—Ç–æ–∫–æ–º–ø–ª–∏—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (`/backend/open_webui/utils/task.py:284-296`):
- `{{TYPE}}` - –¢–∏–ø –∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è (General, Search Query)
- `{{PROMPT}}` - –¢–µ–∫—Å—Ç –¥–ª—è –¥–æ–ø–æ–ª–Ω–µ–Ω–∏—è

**Tools –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (`/backend/open_webui/utils/task.py:347-349`):
- `{{TOOLS}}` - –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ

**MOA –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ** (`/backend/open_webui/utils/task.py:310-344`):
- `{{responses}}` - –û—Ç–≤–µ—Ç—ã –æ—Ç —Ä–∞–∑–Ω—ã—Ö –º–æ–¥–µ–ª–µ–π –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–æ–º—Ç–æ–≤

### –°–ø–æ—Å–æ–±—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–º—Ç–æ–≤

1. **–ß–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ `DEFAULT_*_PROMPT_TEMPLATE` –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
2. **–ß–µ—Ä–µ–∑ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–æ–º—Ç—ã —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ persistent config table
3. **–ß–µ—Ä–µ–∑ API**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ endpoint `/tasks/config/update` (`/backend/open_webui/routers/tasks.py:92-126`)
4. **–ß–µ—Ä–µ–∑ UI**: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ

### API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø—Ä–æ–º—Ç–∞–º–∏

**Endpoints** (`/backend/open_webui/routers/tasks.py`):
- `GET /tasks/config` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–º—Ç–æ–≤
- `POST /tasks/config/update` - –û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–º—Ç–æ–≤

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–º—Ç—ã** (`/backend/open_webui/routers/prompts.py`):
- `GET /prompts/` - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–º—Ç—ã
- `GET /prompts/list` - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–º—Ç–æ–≤ —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö
- `GET /prompts/command/{command}` - –ü–æ–ª—É—á–∏—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –ø—Ä–æ–º—Ç –ø–æ –∫–æ–º–∞–Ω–¥–µ
- `POST /prompts/create` - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ø—Ä–æ–º—Ç
- `POST /prompts/command/{command}/update` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ–º—Ç
- `DELETE /prompts/command/{command}/delete` - –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ–º—Ç

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –ø—Ä–æ–º—Ç—ã

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/models/prompts.py`

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–≤–æ–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø—Ä–æ–º—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö. –ö–∞–∂–¥—ã–π –ø—Ä–æ–º—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç:
- `command` - –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤—ã–∑–æ–≤–∞ –ø—Ä–æ–º—Ç–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "/mycode")
- `title` - –ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–º—Ç–∞
- `content` - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–æ–º—Ç–∞
- `user_id` - –í–ª–∞–¥–µ–ª–µ—Ü –ø—Ä–æ–º—Ç–∞
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –¥–æ—Å—Ç—É–ø–∞ (public/private/group)

### –î–µ—Ñ–æ–ª—Ç–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –Ω–∞—á–∞–ª–∞

**–†–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ:** `/backend/open_webui/config.py:1176-1182`
**–ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è:** `DEFAULT_PROMPT_SUGGESTIONS`

–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏, –∫–æ—Ç–æ—Ä—ã–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –Ω–∞—á–∞–ª–µ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞. –°–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å—Ç–∞—Ä—Ç–∞.

---

## –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ –æ—Å–Ω–æ–≤–Ω—ã–µ AI –ø—Ä–æ–º—Ç—ã Open WebUI —Å –∏—Ö –ø–æ–ª–Ω—ã–º–∏ –æ–ø–∏—Å–∞–Ω–∏—è–º–∏, —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ–º –≤ –∫–æ–¥–µ –∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º. –í—Å–µ –ø—Ä–æ–º—Ç—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –º–æ–≥—É—Ç –±—ã—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ API, –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –ø—Ä–æ–º—Ç–æ–≤:**
1. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (–∑–∞–≥–æ–ª–æ–≤–∫–∏, —Ç–µ–≥–∏, –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, follow-ups)
2. –ü–æ–∏—Å–∫ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤)
3. –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ)
4. –†–∞–±–æ—Ç–∞ —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏ (function calling, code interpreter)
5. RAG (–æ—Ç–≤–µ—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞)
6. –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ (emoji, MOA)

–í—Å–µ –ø—Ä–æ–º—Ç—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω—ã —Å —É—á–µ—Ç–æ–º:
- –ú–Ω–æ–≥–æ—è–∑—ã—á–Ω–æ—Å—Ç–∏ (–æ—Ç–≤–µ—á–∞—é—Ç –Ω–∞ —è–∑—ã–∫–µ –∑–∞–ø—Ä–æ—Å–∞)
- –°—Ç—Ä–æ–≥–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞ –≤—ã–≤–æ–¥–∞ (–æ–±—ã—á–Ω–æ JSON)
- –ö–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏ —á–∞—Ç–∞
- –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ —Å–∏—Å—Ç–µ–º—ã
